import{B as z,l as B,m as L,o as c,c as u,q as P,_ as R,a as b,b as l,d as i,w as d,r as T,e as N,F as A,f as U,g as y,t as q,h as f,n as p,p as $,i as E,s as j,j as O,k as H}from"./index-1PYYOqbW.js";import{s as M,a as K,b as Y,c as G,d as J,e as Q}from"./index-B6UJGvDB.js";import{s as W}from"./index-Cob0FvQU.js";import{s as X}from"./index-DLoo_FT-.js";var Z=function(s){var t=s.dt;return`
.p-textarea {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: `.concat(t("textarea.color"),`;
    background: `).concat(t("textarea.background"),`;
    padding: `).concat(t("textarea.padding.y")," ").concat(t("textarea.padding.x"),`;
    border: 1px solid `).concat(t("textarea.border.color"),`;
    transition: background `).concat(t("textarea.transition.duration"),", color ").concat(t("textarea.transition.duration"),", border-color ").concat(t("textarea.transition.duration"),", outline-color ").concat(t("textarea.transition.duration"),", box-shadow ").concat(t("textarea.transition.duration"),`;
    appearance: none;
    border-radius: `).concat(t("textarea.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(t("textarea.shadow"),`;
}

.p-textarea:enabled:hover {
    border-color: `).concat(t("textarea.hover.border.color"),`;
}

.p-textarea:enabled:focus {
    border-color: `).concat(t("textarea.focus.border.color"),`;
    box-shadow: `).concat(t("textarea.focus.ring.shadow"),`;
    outline: `).concat(t("textarea.focus.ring.width")," ").concat(t("textarea.focus.ring.style")," ").concat(t("textarea.focus.ring.color"),`;
    outline-offset: `).concat(t("textarea.focus.ring.offset"),`;
}

.p-textarea.p-invalid {
    border-color: `).concat(t("textarea.invalid.border.color"),`;
}

.p-textarea.p-variant-filled {
    background: `).concat(t("textarea.filled.background"),`;
}

.p-textarea.p-variant-filled:enabled:focus {
    background: `).concat(t("textarea.filled.focus.background"),`;
}

.p-textarea:disabled {
    opacity: 1;
    background: `).concat(t("textarea.disabled.background"),`;
    color: `).concat(t("textarea.disabled.color"),`;
}

.p-textarea::placeholder {
    color: `).concat(t("textarea.placeholder.color"),`;
}

.p-textarea-fluid {
    width: 100%;
}

.p-textarea-resizable {
    overflow: hidden;
    resize: none;
}
`)},ee={root:function(s){var t=s.instance,r=s.props;return["p-textarea p-component",{"p-filled":t.filled,"p-textarea-resizable ":r.autoResize,"p-invalid":r.invalid,"p-variant-filled":r.variant?r.variant==="filled":t.$primevue.config.inputStyle==="filled"||t.$primevue.config.inputVariant==="filled","p-textarea-fluid":t.hasFluid}]}},te=z.extend({name:"textarea",theme:Z,classes:ee}),se={name:"BaseTextarea",extends:L,props:{modelValue:null,autoResize:Boolean,invalid:{type:Boolean,default:!1},variant:{type:String,default:null},fluid:{type:Boolean,default:null}},style:te,provide:function(){return{$pcTextarea:this,$parentInstance:this}}},x={name:"Textarea",extends:se,inheritAttrs:!1,emits:["update:modelValue"],inject:{$pcFluid:{default:null}},mounted:function(){this.$el.offsetParent&&this.autoResize&&this.resize()},updated:function(){this.$el.offsetParent&&this.autoResize&&this.resize()},methods:{resize:function(){this.$el.style.height="auto",this.$el.style.height=this.$el.scrollHeight+"px",parseFloat(this.$el.style.height)>=parseFloat(this.$el.style.maxHeight)?(this.$el.style.overflowY="scroll",this.$el.style.height=this.$el.style.maxHeight):this.$el.style.overflow="hidden"},onInput:function(s){this.autoResize&&this.resize(),this.$emit("update:modelValue",s.target.value)}},computed:{filled:function(){return this.modelValue!=null&&this.modelValue.toString().length>0},ptmParams:function(){return{context:{disabled:this.$attrs.disabled||this.$attrs.disabled===""}}},hasFluid:function(){return B(this.fluid)?!!this.$pcFluid:this.fluid}}},ae=["value","aria-invalid"];function oe(a,s,t,r,e,n){return c(),u("textarea",P({class:a.cx("root"),value:a.modelValue,"aria-invalid":a.invalid||void 0,onInput:s[0]||(s[0]=function(){return n.onInput&&n.onInput.apply(n,arguments)})},a.ptmi("root",n.ptmParams)),null,16,ae)}x.render=oe;const ie={data(){return{customers:null,customer:{},data:{},columns:null,totalRecords:0,loading:!1,isLoading:!1,params:{},filters:"",deleteDialog:!1,customerDialog:!1,submitted:!1}},created(){this.columns=[{field:"name",header:"Name",style:"min-width:150px;"},{field:"email",header:"Email",style:"min-width:150px;"},{field:"phone_number",header:"Phone Number",style:"min-width:150px;"},{field:"address",header:"Address",style:"min-width:180px;"}]},mounted(){this.loadData()},methods:{async loadData(){const a=localStorage.getItem("token");this.loading=!0,this.params.filters=this.filters;const s=Object.keys(this.params).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(this.params[r])).join("&"),t=await b.get("v1/customer?"+s,{headers:{Authorization:`Bearer ${a}`}}).catch(r=>{this.loading=!1;const e=r.response.data;e.meta.code==401?(localStorage.removeItem("token"),this.$router.push({name:"login"})):this.$toast.add({severity:"error",summary:"Failed!",detail:e.data.errors,life:3e3})});if(t.data.meta.code==200){const r=t.data;this.customers=r.data.data,this.totalRecords=r.data.countData,this.loading=!1}},onPage(a){this.params=a.originalEvent,this.params.sortField=a.sortField,this.params.sortOrder=a.sortOrder,this.loadData()},onSort(a){this.params.sortField=a.sortField,this.params.sortOrder=a.sortOrder,this.loadData()},onFilter(){this.loadData()},refresh(){this.loadData()},newData(){this.customer={},this.submitted=!1,this.customerDialog=!0,this.isLoading=!1},hideDialog(){this.customerDialog=!1,this.submitted=!1,this.submittedUpdate=!1,this.isLoading=!1},editData(a){this.customer={...a},this.customerDialog=!0,this.submitted=!1},async saveData(){const a=localStorage.getItem("token");if(this.isLoading=!0,this.customer.ID)if(this.submitted=!0,this.customer.name&&this.customer.phone_number&&this.customer.email.trim()&&this.customer.address){let s={id:this.customer.ID,name:this.customer.name,email:this.customer.email,phone_number:this.customer.phone_number,address:this.customer.address};const t=await b.put("v1/customer",s,{headers:{Authorization:`Bearer ${a}`}}).catch(r=>{this.isLoading=!1;const e=r.response.data;e.meta.code==401?(localStorage.removeItem("token"),this.$router.push({name:"login"})):(this.isLoading=!1,this.$toast.add({severity:"error",summary:"Failed!",detail:e.data.errors,life:3e3}))});if(t.data.meta.code==200){await this.loadData();const r=t.data;this.isLoading=!1,this.customerDialog=!1,this.$toast.add({severity:"success",summary:r.meta.message,detail:"Customer has been updated!",life:3e3})}}else this.isLoading=!1,this.$toast.add({severity:"error",summary:"Failed!",detail:"Input must be required!",life:3e3});else if(this.submitted=!0,this.customer.name&&this.customer.phone_number&&this.customer.email.trim()&&this.customer.address){const s={name:this.customer.name,email:this.customer.email,phone_number:this.customer.phone_number,address:this.customer.address},t=await b.post("v1/customer",s,{headers:{Authorization:`Bearer ${a}`}}).catch(r=>{this.isLoading=!1;const e=r.response.data;e.meta.code==401?(localStorage.removeItem("token"),this.$router.push({name:"login"})):this.$toast.add({severity:"error",summary:"Failed!",detail:e.data.errors,life:5e3})});if(t.data.meta.code==201){await this.loadData();const r=t.data;this.customerDialog=!1,this.isLoading=!1,this.$toast.add({severity:"success",summary:r.meta.message,detail:"customer has been added!",life:3e3})}}else this.isLoading=!1,this.$toast.add({severity:"error",summary:"Failed!",detail:"Input must be required!",life:3e3})},confirmDelete(a){this.customer=a,this.deleteDialog=!0},async deleteData(){if(this.customer.ID){const a=localStorage.getItem("token"),s=await b.delete("v1/customer/"+this.customer.ID,{headers:{Authorization:`Bearer ${a}`}}).catch(t=>{this.loading=!1;const r=t.response.data;r.meta.code==401?(localStorage.removeItem("token"),this.$router.push({name:"login"})):this.$toast.add({severity:"error",summary:"Failed!",detail:r.data.errors,life:3e3})});if(s.data.meta.code==200){const t=s.data;this.loading=!1,this.deleteDialog=!1,this.loadData(),this.$toast.add({severity:"success",summary:t.meta.message,detail:"Customer has been deleted!",life:3e3})}}else this.$toast.add({severity:"error",summary:"Failed!",detail:"Please reload data",life:3e3})}}},m=a=>($("data-v-39f09c39"),a=a(),E(),a),re={class:"grid"},le={class:"col-12"},ne={class:"col-12"},de={class:"card"},ce=m(()=>i("h5",null,"Customer Data",-1)),ue={class:"my-2"},me={class:"flex flex-wrap gap-2 items-center justify-between"},he=m(()=>i("i",{class:"pi pi-search"},null,-1)),pe={class:"flex align-items-center justify-content-center"},fe=m(()=>i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ge={key:0},be=m(()=>i("svg",{class:"pl",width:"240",height:"240",viewBox:"0 0 240 240"},[i("circle",{class:"pl__ring pl__ring--a",cx:"120",cy:"120",r:"105",fill:"none",stroke:"#000","stroke-width":"20","stroke-dasharray":"0 660","stroke-dashoffset":"-330","stroke-linecap":"round"}),i("circle",{class:"pl__ring pl__ring--b",cx:"120",cy:"120",r:"35",fill:"none",stroke:"#000","stroke-width":"20","stroke-dasharray":"0 220","stroke-dashoffset":"-110","stroke-linecap":"round"}),i("circle",{class:"pl__ring pl__ring--c",cx:"85",cy:"120",r:"70",fill:"none",stroke:"#000","stroke-width":"20","stroke-dasharray":"0 440","stroke-linecap":"round"}),i("circle",{class:"pl__ring pl__ring--d",cx:"155",cy:"120",r:"70",fill:"none",stroke:"#000","stroke-width":"20","stroke-dasharray":"0 440","stroke-linecap":"round"})],-1)),ve=[be],_e={class:"grid grid-cols-12 gap-4 mb-5"},ye={class:"col-span-6"},xe=m(()=>i("label",{for:"name"},"Name",-1)),ke={key:0,class:"p-invalid-text"},we={class:"col-span-6"},De=m(()=>i("label",{for:"email"},"Email",-1)),Ie={key:0,class:"p-invalid-text"},Ce={class:"grid grid-cols-12 gap-4"},Fe={class:"col-span-6"},Ve=m(()=>i("label",{for:"phone_number"},"Phone number",-1)),Se={key:0,class:"p-invalid-text"},ze={class:"col-span-6"},Be=m(()=>i("label",{for:"address"},"Address",-1)),Le={key:0,class:"p-invalid-text"};function Pe(a,s,t,r,e,n){const k=j,w=T("router-view"),h=X,D=Y,g=W,I=G,C=J,v=Q,F=M,_=K,V=x;return c(),u("div",re,[l(k),i("div",le,[l(w,{onRefreshTable:n.refresh},null,8,["onRefreshTable"])]),i("div",ne,[i("div",de,[ce,l(F,{lazy:!0,paginator:!0,scrollable:!0,scrollHeight:"flex",wrapper:!0,rows:10,value:e.customers,totalRecords:e.totalRecords,loading:e.loading,onPage:s[2]||(s[2]=o=>n.onPage(o)),onSort:s[3]||(s[3]=o=>n.onSort(o)),onFilter:s[4]||(s[4]=o=>n.onFilter(o)),ref:"dt",dataKey:"id",responsiveLayout:"scroll"},{default:d(()=>[l(C,{class:"mb-4"},{start:d(()=>[i("div",ue,[l(h,{label:"New",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:n.newData},null,8,["onClick"])])]),end:d(()=>[i("div",me,[l(I,null,{default:d(()=>[l(D,null,{default:d(()=>[he]),_:1}),l(g,{modelValue:e.filters,"onUpdate:modelValue":s[0]||(s[0]=o=>e.filters=o),placeholder:"Search...",onKeydown:s[1]||(s[1]=N(o=>n.onFilter(),["enter"]))},null,8,["modelValue"])]),_:1})])]),_:1}),(c(!0),u(A,null,U(e.columns,o=>(c(),O(v,{field:o.field,header:o.header,key:o.field,sortable:!0,style:H(o.style)},null,8,["field","header","style"]))),128)),l(v,{headerStyle:"min-width:10rem;",frozen:"",alignFrozen:"right"},{body:d(o=>[l(h,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:S=>n.editData(o.data)},null,8,["onClick"]),l(h,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:S=>n.confirmDelete(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","totalRecords","loading"]),l(_,{visible:e.deleteDialog,"onUpdate:visible":s[6]||(s[6]=o=>e.deleteDialog=o),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[l(h,{label:"No",icon:"pi pi-times",class:"p-button-secondary",onClick:s[5]||(s[5]=o=>e.deleteDialog=!1)}),l(h,{label:"Yes",icon:"pi pi-check",class:"p-button-danger",onClick:n.deleteData},null,8,["onClick"])]),default:d(()=>[i("div",pe,[fe,e.customer?(c(),u("span",ge,[y("Are you sure you want to delete "),i("b",null,q(e.customer.name),1),y("?")])):f("",!0)])]),_:1},8,["visible"]),l(_,{visible:e.customerDialog,"onUpdate:visible":s[11]||(s[11]=o=>e.customerDialog=o),style:{width:"550px",position:"relatif"},header:"Form Customer",modal:!0,class:"p-fluid"},{footer:d(()=>[l(h,{label:"Cancel",icon:"pi pi-times",text:"",onClick:n.hideDialog},null,8,["onClick"]),l(h,{label:"Save",icon:"pi pi-check",onClick:n.saveData},null,8,["onClick"])]),default:d(()=>[i("div",{class:p(e.isLoading?"canvas-loading loading-icon":"canvas-loading loading-icon-hide")},ve,2),i("div",{class:p(e.isLoading?"canvas-form-opacity":"canvas-form")},[i("div",_e,[i("div",ye,[xe,l(g,{id:"name",placeholder:"Name",modelValue:e.customer.name,"onUpdate:modelValue":s[7]||(s[7]=o=>e.customer.name=o),modelModifiers:{trim:!0},required:"true",autofocus:"",class:p({"p-invalid":e.submitted&&!e.customer.name}),fluid:""},null,8,["modelValue","class"]),e.submitted&&!e.customer.name?(c(),u("small",ke,"Name is required.")):f("",!0)]),i("div",we,[De,l(g,{id:"email",placeholder:"Email",modelValue:e.customer.email,"onUpdate:modelValue":s[8]||(s[8]=o=>e.customer.email=o),modelModifiers:{trim:!0},autofocus:"",class:p({"p-invalid":e.submitted&&!e.customer.email}),fluid:""},null,8,["modelValue","class"]),e.submitted&&!e.customer.email?(c(),u("small",Ie,"Email is required.")):f("",!0)])]),i("div",Ce,[i("div",Fe,[Ve,l(g,{id:"phone_number",placeholder:"Phone number",modelValue:e.customer.phone_number,"onUpdate:modelValue":s[9]||(s[9]=o=>e.customer.phone_number=o),modelModifiers:{trim:!0},autofocus:"",class:p({"p-invalid":e.submitted&&!e.customer.phone_number}),fluid:""},null,8,["modelValue","class"]),e.submitted&&!e.customer.phone_number?(c(),u("small",Se,"Phone number is required.")):f("",!0)]),i("div",ze,[Be,l(V,{id:"address",rows:"4",placeholder:"Address",modelValue:e.customer.address,"onUpdate:modelValue":s[10]||(s[10]=o=>e.customer.address=o),modelModifiers:{trim:!0},autofocus:"",class:p({"p-invalid":e.submitted&&!e.customer.address}),fluid:""},null,8,["modelValue","class"]),e.submitted&&!e.customer.address?(c(),u("small",Le,"Address is required.")):f("",!0)])])],2)]),_:1},8,["visible"])])])])}const Ue=R(ie,[["render",Pe],["__scopeId","data-v-39f09c39"]]);export{Ue as default};
